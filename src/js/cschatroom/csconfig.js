var csPublic = (function (window, r) {
  r.regExpTel = new RegExp('((\\+86-?)?(\\d{5,15})|((\\d{7,8})|(\\d{3,4})-(\\d{7,8})|(\\d{3,4})-(\\d{7,8}|\\d{3,4})-(\\d{1,4})|(\\d{7,8})-(\\d{1,4})))', 'g');
  r.regExpUrl = new RegExp('(((http|ftp|https):\\/\\/)?[\\w\\-_]+(\\.[\\w\\-_]+)+([\\w\\-\\.,@?^=%&amp;:/~\\+#]*[\\w\\-\\@?^=%&amp;/~\\+#])?)', 'g');
  r.regExpBr = new RegExp('\n', 'g');
  r.emotag = true;
  r.clicktag = 0;
  r.titleTimer = null;
  r.titleStop = false;
  var peopleemo = ['ğŸ˜€', 'ğŸ˜', 'ğŸ˜‚', 'ğŸ˜ƒ', 'ğŸ˜„', 'ğŸ˜…', 'ğŸ˜†', 'ğŸ˜‰', 'ğŸ˜Š', 'ğŸ˜‹', 'ğŸ˜', 'ğŸ˜', 'ğŸ˜˜', 'ğŸ˜—', 'ğŸ˜™', 'ğŸ˜š', 'â˜º', 'ğŸ™‚', 'ğŸ¤—', 'ğŸ˜‡', 'ğŸ¤“', 'ğŸ¤”', 'ğŸ˜', 'ğŸ˜‘', 'ğŸ˜¶', 'ğŸ™„', 'ğŸ˜', 'ğŸ˜£', 'ğŸ˜¥', 'ğŸ˜®', 'ğŸ¤', 'ğŸ˜¯', 'ğŸ˜ª', 'ğŸ˜«', 'ğŸ˜´', 'ğŸ˜Œ', 'ğŸ˜›', 'ğŸ˜œ', 'ğŸ˜', 'ğŸ˜’', 'ğŸ˜“', 'ğŸ˜”', 'ğŸ˜•', 'ğŸ™ƒ', 'ğŸ¤‘', 'ğŸ˜²', 'ğŸ˜·', 'ğŸ¤’', 'ğŸ¤•', 'â˜¹', 'ğŸ™', 'ğŸ˜–', 'ğŸ˜', 'ğŸ˜Ÿ', 'ğŸ˜¤', 'ğŸ˜¢', 'ğŸ˜­', 'ğŸ˜¦', 'ğŸ˜§', 'ğŸ˜¨', 'ğŸ˜©', 'ğŸ˜¬', 'ğŸ˜°', 'ğŸ˜±', 'ğŸ˜³', 'ğŸ˜µ', 'ğŸ˜¡', 'ğŸ˜ ', 'ğŸ˜ˆ', 'ğŸ‘¿', 'ğŸ‘¹', 'ğŸ‘º', 'ğŸ’€', 'ğŸ‘»', 'ğŸ‘½', 'ğŸ¤–', 'ğŸ’©', 'ğŸ˜º', 'ğŸ˜¸', 'ğŸ˜¹', 'ğŸ˜»', 'ğŸ˜¼', 'ğŸ˜½', 'ğŸ™€', 'ğŸ˜¿', 'ğŸ˜¾', 'ğŸ‘¦', 'ğŸ‘§', 'ğŸ‘¨', 'ğŸ‘©', 'ğŸ‘´', 'ğŸ‘µ', 'ğŸ‘¶', 'ğŸ‘±', 'ğŸ‘®', 'ğŸ‘²', 'ğŸ‘³', 'ğŸ‘·', 'â›‘', 'ğŸ‘¸', 'ğŸ’‚', 'ğŸ•µ', 'ğŸ…', 'ğŸ‘°', 'ğŸ‘¼', 'ğŸ’†', 'ğŸ’‡', 'ğŸ™', 'ğŸ™', 'ğŸ™…', 'ğŸ™†', 'ğŸ’', 'ğŸ™‹', 'ğŸ™‡', 'ğŸ™Œ', 'ğŸ™', 'ğŸ—£', 'ğŸ‘¤', 'ğŸ‘¥', 'ğŸš¶', 'ğŸƒ', 'ğŸ‘¯', 'ğŸ’ƒ', 'ğŸ•´', 'ğŸ‘«', 'ğŸ‘¬', 'ğŸ‘­', 'ğŸ’', 'ğŸ‘¨â€â¤ï¸â€ğŸ’‹â€ğŸ‘¨', 'ğŸ‘©â€â¤ï¸â€ğŸ’‹â€ğŸ‘©', 'ğŸ’‘', 'ğŸ‘¨â€â¤ï¸â€ğŸ‘¨', 'ğŸ‘©â€â¤ï¸â€ğŸ‘©', 'ğŸ‘ª', 'ğŸ‘¨â€ğŸ‘©â€ğŸ‘§', 'ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦', 'ğŸ‘¨â€ğŸ‘©â€ğŸ‘¦â€ğŸ‘¦', 'ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘§', 'ğŸ‘¨â€ğŸ‘¨â€ğŸ‘¦', 'ğŸ‘¨â€ğŸ‘¨â€ğŸ‘§', 'ğŸ‘¨â€ğŸ‘¨â€ğŸ‘§â€ğŸ‘¦', 'ğŸ‘¨â€ğŸ‘¨â€ğŸ‘¦â€ğŸ‘¦', 'ğŸ‘¨â€ğŸ‘¨â€ğŸ‘§â€ğŸ‘§', 'ğŸ‘©â€ğŸ‘©â€ğŸ‘¦', 'ğŸ‘©â€ğŸ‘©â€ğŸ‘§', 'ğŸ‘©â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦', 'ğŸ‘©â€ğŸ‘©â€ğŸ‘¦â€ğŸ‘¦', 'ğŸ‘©â€ğŸ‘©â€ğŸ‘§â€ğŸ‘§', 'ğŸ’ª', 'ğŸ‘ˆ'
      ], // 150
      animals = ['ğŸ™ˆ', 'ğŸ™‰', 'ğŸ™Š', 'ğŸ’¦', 'ğŸ’¨', 'ğŸµ', 'ğŸ’', 'ğŸ¶', 'ğŸ•', 'ğŸ©', 'ğŸº', 'ğŸ±', 'ğŸˆ', 'ğŸ¦', 'ğŸ¯', 'ğŸ…', 'ğŸ†', 'ğŸ´', 'ğŸ', 'ğŸ¦„', 'ğŸ®', 'ğŸ‚', 'ğŸƒ', 'ğŸ„', 'ğŸ·', 'ğŸ–', 'ğŸ—', 'ğŸ½', 'ğŸ', 'ğŸ‘', 'ğŸ', 'ğŸª', 'ğŸ«', 'ğŸ˜', 'ğŸ­', 'ğŸ', 'ğŸ€', 'ğŸ¹', 'ğŸ°', 'ğŸ‡', 'ğŸ¿', 'ğŸ»', 'ğŸ¨', 'ğŸ¼', 'ğŸ¾', 'ğŸ¦ƒ', 'ğŸ”', 'ğŸ“', 'ğŸ£', 'ğŸ¤', 'ğŸ¥', 'ğŸ¦', 'ğŸ§', 'ğŸ•Š', 'ğŸ¸', 'ğŸŠ', 'ğŸ¢', 'ğŸ', 'ğŸ²', 'ğŸ‰', 'ğŸ³', 'ğŸ‹', 'ğŸ¬', 'ğŸŸ', 'ğŸ ', 'ğŸ¡', 'ğŸ™', 'ğŸš', 'ğŸ¦€', 'ğŸŒ', 'ğŸ›', 'ğŸœ', 'ğŸ', 'ğŸ', 'ğŸ•·', 'ğŸ•¸', 'ğŸ¦‚', 'ğŸ’', 'ğŸŒ¸', 'ğŸ’®', 'ğŸµ', 'ğŸŒ¹', 'ğŸŒº', 'ğŸŒ»', 'ğŸŒ¼', 'ğŸŒ·', 'ğŸŒ±', 'ğŸŒ²', 'ğŸŒ³', 'ğŸŒ´', 'ğŸŒµ', 'ğŸŒ¾', 'ğŸŒ¿', 'â˜˜', 'ğŸ€', 'ğŸ', 'ğŸ‚', 'ğŸƒ', 'ğŸŒ', 'ğŸŒ', 'ğŸŒ', 'ğŸŒ', 'ğŸŒ‘', 'ğŸŒ’', 'ğŸŒ“', 'ğŸŒ”', 'ğŸŒ•', 'ğŸŒ–', 'ğŸŒ—', 'ğŸŒ˜', 'ğŸŒ™', 'ğŸŒš', 'ğŸŒ›', 'ğŸŒœ', 'â˜€', 'ğŸŒ', 'ğŸŒ', 'â­', 'ğŸŒŸ', 'ğŸŒ ', 'â˜', 'â›…', 'â›ˆ', 'ğŸŒ¤', 'ğŸŒ¥', 'ğŸŒ¦', 'ğŸŒ§', 'ğŸŒ¨', 'ğŸŒ©', 'ğŸŒª', 'ğŸŒ«', 'ğŸŒ¬', 'â˜‚', 'â˜”', 'âš¡', 'â„', 'â˜ƒ', 'â˜„', 'ğŸ”¥', 'ğŸ’§', 'ğŸŒŠ'
      ], // 141
      food = ['ğŸ‡', 'ğŸˆ', 'ğŸ‰', 'ğŸŠ', 'ğŸ‹', 'ğŸŒ', 'ğŸ', 'ğŸ', 'ğŸ', 'ğŸ', 'ğŸ‘', 'ğŸ’', 'ğŸ“', 'ğŸ…', 'ğŸ†', 'ğŸŒ½', 'ğŸŒ¶', 'ğŸ„', 'ğŸŒ°', 'ğŸ', 'ğŸ§€', 'ğŸ–', 'ğŸ—', 'ğŸ”', 'ğŸŸ', 'ğŸ•', 'ğŸŒ­', 'ğŸŒ®', 'ğŸŒ¯', 'ğŸ³', 'ğŸ²', 'ğŸ¿', 'ğŸ±', 'ğŸ˜', 'ğŸ™', 'ğŸš', 'ğŸ›', 'ğŸœ', 'ğŸ', 'ğŸ ', 'ğŸ¢', 'ğŸ£', 'ğŸ¤', 'ğŸ¥', 'ğŸ¡', 'ğŸ¦', 'ğŸ§', 'ğŸ¨', 'ğŸ©', 'ğŸª', 'ğŸ‚', 'ğŸ°', 'ğŸ«', 'ğŸ¬', 'ğŸ­', 'ğŸ®', 'ğŸ¯', 'ğŸ¼', 'â˜•', 'ğŸµ', 'ğŸ¶', 'ğŸ¾', 'ğŸ·', 'ğŸ¸', 'ğŸ¹', 'ğŸº', 'ğŸ»', 'ğŸ½', 'ğŸ´'
      ], // 69
      activity = ['ğŸ‘¾', 'ğŸ•´', 'ğŸª', 'ğŸ­', 'ğŸ¨', 'ğŸ°', 'ğŸš£', 'ğŸ›€', 'ğŸ—', 'ğŸŸ', 'ğŸ«', 'ğŸ–', 'ğŸ†', 'ğŸ…', 'âš½', 'âš¾', 'ğŸ€', 'ğŸ', 'ğŸˆ', 'ğŸ‰', 'ğŸ¾', 'ğŸ±', 'ğŸ³', 'ğŸ', 'ğŸ‘', 'ğŸ’', 'ğŸ“', 'ğŸ¸', 'â›³', 'ğŸŒ', 'â›¸', 'ğŸ£', 'ğŸ½', 'ğŸ¿', 'â›·', 'ğŸ‚', 'ğŸ„', 'ğŸ‡', 'ğŸŠ', 'â›¹', 'ğŸ‹', 'ğŸš´', 'ğŸšµ', 'ğŸ¯', 'ğŸ®', 'ğŸ²', 'ğŸ·', 'ğŸ¸', 'ğŸº', 'ğŸ»', 'ğŸ¬', 'ğŸ¹'
      ], // 52
      places = ['ğŸ”', 'â›°', 'ğŸŒ‹', 'ğŸ—»', 'ğŸ•', 'ğŸ–', 'ğŸœ', 'ğŸ', 'ğŸ', 'ğŸŸ', 'ğŸ›', 'ğŸ—', 'ğŸ˜', 'ğŸ™', 'ğŸš', 'ğŸ ', 'ğŸ¡', 'ğŸ¢', 'ğŸ£', 'ğŸ¤', 'ğŸ¥', 'ğŸ¦', 'ğŸ¨', 'ğŸ©', 'ğŸª', 'ğŸ«', 'ğŸ¬', 'ğŸ­', 'ğŸ¯', 'ğŸ°', 'ğŸ’’', 'ğŸ—¼', 'ğŸ—½', 'â›ª', 'ğŸ•Œ', 'ğŸ•', 'â›©', 'ğŸ•‹', 'â›²', 'ğŸŒ', 'ğŸŒƒ', 'ğŸŒ†', 'ğŸŒ‡', 'ğŸŒ‰', 'ğŸŒŒ', 'ğŸ ', 'ğŸ¡', 'ğŸ¢', 'ğŸš‚', 'ğŸšƒ', 'ğŸš„', 'ğŸš…', 'ğŸš†', 'ğŸš‡', 'ğŸšˆ', 'ğŸš‰', 'ğŸšŠ', 'ğŸš', 'ğŸš', 'ğŸš‹', 'ğŸšŒ', 'ğŸš', 'ğŸš', 'ğŸš', 'ğŸš', 'ğŸš‘', 'ğŸš’', 'ğŸš“', 'ğŸš”', 'ğŸš•', 'ğŸš–', 'ğŸš—', 'ğŸš˜', 'ğŸšš', 'ğŸš›', 'ğŸšœ', 'ğŸš²', 'â›½', 'ğŸ›¤', 'ğŸš¨', 'ğŸš¥', 'ğŸš¦', 'ğŸš§', 'âš“', 'â›µ', 'ğŸš£', 'ğŸš¤', 'ğŸ›³', 'â›´', 'ğŸ›¥', 'ğŸš¢', 'âœˆ', 'ğŸ›©', 'ğŸ›«', 'ğŸ›¬', 'ğŸ’º', 'ğŸš', 'ğŸšŸ', 'ğŸš ', 'ğŸš¡', 'ğŸš€', 'ğŸ›°', 'ğŸ‘', 'ğŸ', 'ğŸ', 'ğŸ’´', 'ğŸ’µ', 'ğŸ’¶', 'ğŸ’·', 'ğŸ—¿', 'ğŸ›‚', 'ğŸ›ƒ', 'ğŸ›„', 'ğŸ›…'
      ], // 114
      objects = ['â˜ ', 'ğŸ’Œ', 'ğŸ’£', 'ğŸ•³', 'ğŸ›', 'ğŸ“¿', 'ğŸ’', 'ğŸ”ª', 'ğŸº', 'ğŸ—º', 'ğŸ’ˆ', 'ğŸ–¼', 'ğŸ›', 'ğŸšª', 'ğŸ›Œ', 'ğŸ›', 'ğŸ›‹', 'ğŸš½', 'ğŸš¿', 'ğŸ›', 'âŒ›', 'â³', 'âŒš', 'â°', 'â±', 'â²', 'ğŸ•°', 'ğŸŒ¡', 'â›±', 'ğŸˆ', 'ğŸ‰', 'ğŸŠ', 'ğŸ', 'ğŸ', 'ğŸ', 'ğŸ€', 'ğŸ', 'ğŸ•¹', 'ğŸ“¯', 'ğŸ™', 'ğŸš', 'ğŸ›', 'ğŸ“»', 'ğŸ“±', 'ğŸ“²', 'â˜', 'ğŸ“', 'ğŸ“Ÿ', 'ğŸ“ ', 'ğŸ”‹', 'ğŸ”Œ', 'ğŸ’»', 'ğŸ–¥', 'ğŸ–¨', 'âŒ¨', 'ğŸ–±', 'ğŸ–²', 'ğŸ’½', 'ğŸ’¾', 'ğŸ’¿', 'ğŸ“€', 'ğŸ¥', 'ğŸ', 'ğŸ“½', 'ğŸ“º', 'ğŸ“·', 'ğŸ“¸', 'ğŸ“¹', 'ğŸ“¼', 'ğŸ”', 'ğŸ”', 'ğŸ”¬', 'ğŸ”­', 'ğŸ“¡', 'ğŸ•¯', 'ğŸ’¡', 'ğŸ”¦', 'ğŸ®', 'ğŸ“”', 'ğŸ“•', 'ğŸ“–', 'ğŸ“—', 'ğŸ“˜', 'ğŸ“™', 'ğŸ“š', 'ğŸ““', 'ğŸ“ƒ', 'ğŸ“œ', 'ğŸ“„', 'ğŸ“°', 'ğŸ—', 'ğŸ“‘', 'ğŸ”–', 'ğŸ·', 'ğŸ’°', 'ğŸ’´', 'ğŸ’µ', 'ğŸ’¶', 'ğŸ’·', 'ğŸ’¸', 'ğŸ’³', 'âœ‰', 'ğŸ“§', 'ğŸ“¨', 'ğŸ“©', 'ğŸ“¤', 'ğŸ“¥', 'ğŸ“¦', 'ğŸ“«', 'ğŸ“ª', 'ğŸ“¬', 'ğŸ“­', 'ğŸ“®', 'ğŸ—³', 'âœ', 'âœ’', 'ğŸ–‹', 'ğŸ–Š', 'ğŸ–Œ', 'ğŸ–', 'ğŸ“', 'ğŸ“', 'ğŸ“‚', 'ğŸ—‚', 'ğŸ“…', 'ğŸ“†', 'ğŸ—’', 'ğŸ—“', 'ğŸ“‡', 'ğŸ“ˆ', 'ğŸ“‰', 'ğŸ“Š', 'ğŸ“‹', 'ğŸ“Œ', 'ğŸ“', 'ğŸ“', 'ğŸ–‡', 'ğŸ“', 'ğŸ“', 'âœ‚', 'ğŸ—ƒ', 'ğŸ—„', 'ğŸ—‘', 'ğŸ”’', 'ğŸ”“', 'ğŸ”', 'ğŸ”', 'ğŸ”‘', 'ğŸ—', 'ğŸ”¨'
      ], // 150
      symbols = ['ğŸ‘â€ğŸ—¨', 'ğŸ’˜', 'â¤', 'ğŸ’“', 'ğŸ’”', 'ğŸ’•', 'ğŸ’–', 'ğŸ’—', 'ğŸ’™', 'ğŸ’š', 'ğŸ’›', 'ğŸ’œ', 'ğŸ’', 'ğŸ’', 'ğŸ’Ÿ', 'â£', 'ğŸ’¤', 'ğŸ’¢', 'ğŸ’¬', 'ğŸ—¯', 'ğŸ’­', 'ğŸ’®', 'â™¨', 'ğŸ’ˆ', 'ğŸ•›', 'ğŸ•§', 'ğŸ•', 'ğŸ•œ', 'ğŸ•‘', 'ğŸ•', 'ğŸ•’', 'ğŸ•', 'ğŸ•“', 'ğŸ•Ÿ', 'ğŸ•”', 'ğŸ• ', 'ğŸ••', 'ğŸ•¡', 'ğŸ•–', 'ğŸ•¢', 'ğŸ•—', 'ğŸ•£', 'ğŸ•˜', 'ğŸ•¤', 'ğŸ•™', 'ğŸ•¥', 'ğŸ•š', 'ğŸ•¦', 'ğŸŒ€', 'â™ ', 'â™¥', 'â™¦', 'â™£', 'ğŸ€„', 'ğŸ´', 'ğŸ”‡', 'ğŸ”ˆ', 'ğŸ”‰', 'ğŸ”Š', 'ğŸ“¢', 'ğŸ“£', 'ğŸ“¯', 'ğŸ””', 'ğŸ”•', 'ğŸ§', 'ğŸš®', 'ğŸš°', 'â™¿', 'ğŸš¹', 'ğŸšº', 'ğŸš»', 'ğŸš¼', 'ğŸš¾', 'âš ', 'ğŸš¸', 'â›”', 'ğŸš«', 'ğŸš³', 'ğŸš­', 'ğŸš¯', 'ğŸš±', 'ğŸš·', 'ğŸ”', 'â˜¢', 'â˜£', 'â¬†', 'â†—', 'â¡', 'â†˜', 'â¬‡', 'â†™', 'â¬…', 'â†–', 'â†•', 'â†”', 'â†©', 'â†ª', 'â¤´', 'â¤µ', 'ğŸ”ƒ', 'ğŸ”„', 'ğŸ”™', 'ğŸ”š', 'ğŸ”›', 'ğŸ”œ', 'ğŸ”', 'ğŸ›', 'âš›', 'ğŸ•‰', 'âœ¡', 'â˜¸', 'â˜¯', 'âœ', 'â˜¦', 'â˜ª', 'â˜®', 'ğŸ•', 'ğŸ”¯', 'â™»', 'ğŸ“›', 'ğŸ”°', 'ğŸ”±', 'â­•', 'âœ…', 'â˜‘', 'âœ”', 'âœ–', 'âŒ', 'â', 'â•', 'â–', 'â—', 'â°', 'â¿', 'ã€½', 'âœ³', 'âœ´', 'â‡', 'â€¼', 'â‰', 'â“', 'â”', 'â•', 'â—', 'Â©', 'Â®', 'â„¢', 'â™ˆ', 'â™‰', 'â™Š'
      ], // 150
      flags = ['ğŸ‡¦ğŸ‡¨', 'ğŸ‡¦ğŸ‡©', 'ğŸ‡¦ğŸ‡ª', 'ğŸ‡¦ğŸ‡«', 'ğŸ‡¦ğŸ‡¬', 'ğŸ‡¦ğŸ‡®', 'ğŸ‡¦ğŸ‡±', 'ğŸ‡¦ğŸ‡²', 'ğŸ‡¦ğŸ‡´', 'ğŸ‡¦ğŸ‡¶', 'ğŸ‡¦ğŸ‡·', 'ğŸ‡¦ğŸ‡¸', 'ğŸ‡¦ğŸ‡¹', 'ğŸ‡¦ğŸ‡º', 'ğŸ‡¦ğŸ‡¼', 'ğŸ‡¦ğŸ‡½', 'ğŸ‡¦ğŸ‡¿', 'ğŸ‡§ğŸ‡¦', 'ğŸ‡§ğŸ‡§', 'ğŸ‡§ğŸ‡©', 'ğŸ‡§ğŸ‡ª', 'ğŸ‡§ğŸ‡«', 'ğŸ‡§ğŸ‡¬', 'ğŸ‡§ğŸ‡­', 'ğŸ‡§ğŸ‡®', 'ğŸ‡§ğŸ‡¯', 'ğŸ‡§ğŸ‡±', 'ğŸ‡§ğŸ‡²', 'ğŸ‡§ğŸ‡³', 'ğŸ‡§ğŸ‡´', 'ğŸ‡§ğŸ‡¶', 'ğŸ‡§ğŸ‡·', 'ğŸ‡§ğŸ‡¸', 'ğŸ‡§ğŸ‡¹', 'ğŸ‡§ğŸ‡»', 'ğŸ‡§ğŸ‡¼', 'ğŸ‡§ğŸ‡¾', 'ğŸ‡§ğŸ‡¿', 'ğŸ‡¨ğŸ‡¦', 'ğŸ‡¨ğŸ‡¨', 'ğŸ‡¨ğŸ‡©', 'ğŸ‡¨ğŸ‡«', 'ğŸ‡¨ğŸ‡¬', 'ğŸ‡¨ğŸ‡­', 'ğŸ‡¨ğŸ‡®', 'ğŸ‡¨ğŸ‡°', 'ğŸ‡¨ğŸ‡±', 'ğŸ‡¨ğŸ‡²', 'ğŸ‡¨ğŸ‡³', 'ğŸ‡¨ğŸ‡´', 'ğŸ‡¨ğŸ‡µ', 'ğŸ‡¨ğŸ‡·', 'ğŸ‡¨ğŸ‡º', 'ğŸ‡¨ğŸ‡»', 'ğŸ‡¨ğŸ‡¼', 'ğŸ‡¨ğŸ‡½', 'ğŸ‡¨ğŸ‡¾', 'ğŸ‡¨ğŸ‡¿', 'ğŸ‡©ğŸ‡ª', 'ğŸ‡©ğŸ‡¬', 'ğŸ‡©ğŸ‡¯', 'ğŸ‡©ğŸ‡°', 'ğŸ‡©ğŸ‡²', 'ğŸ‡©ğŸ‡´', 'ğŸ‡©ğŸ‡¿', 'ğŸ‡ªğŸ‡¦', 'ğŸ‡ªğŸ‡¨', 'ğŸ‡ªğŸ‡ª', 'ğŸ‡ªğŸ‡¬', 'ğŸ‡ªğŸ‡­', 'ğŸ‡ªğŸ‡·', 'ğŸ‡ªğŸ‡¸', 'ğŸ‡ªğŸ‡¹', 'ğŸ‡ªğŸ‡º', 'ğŸ‡«ğŸ‡®', 'ğŸ‡«ğŸ‡¯', 'ğŸ‡«ğŸ‡°', 'ğŸ‡«ğŸ‡²', 'ğŸ‡«ğŸ‡´', 'ğŸ‡«ğŸ‡·', 'ğŸ‡¬ğŸ‡¦', 'ğŸ‡¬ğŸ‡§', 'ğŸ‡¬ğŸ‡©', 'ğŸ‡¬ğŸ‡ª', 'ğŸ‡¬ğŸ‡«', 'ğŸ‡¬ğŸ‡¬', 'ğŸ‡¬ğŸ‡­', 'ğŸ‡¬ğŸ‡®', 'ğŸ‡¬ğŸ‡±', 'ğŸ‡¬ğŸ‡²', 'ğŸ‡¬ğŸ‡³', 'ğŸ‡¬ğŸ‡µ', 'ğŸ‡¬ğŸ‡¶', 'ğŸ‡¬ğŸ‡·', 'ğŸ‡¬ğŸ‡¸', 'ğŸ‡¬ğŸ‡¹', 'ğŸ‡¬ğŸ‡º', 'ğŸ‡¬ğŸ‡¼', 'ğŸ‡¬ğŸ‡¾', 'ğŸ‡­ğŸ‡°', 'ğŸ‡­ğŸ‡²', 'ğŸ‡­ğŸ‡³', 'ğŸ‡­ğŸ‡·', 'ğŸ‡­ğŸ‡¹', 'ğŸ‡­ğŸ‡º', 'ğŸ‡®ğŸ‡¨', 'ğŸ‡®ğŸ‡©', 'ğŸ‡®ğŸ‡ª', 'ğŸ‡®ğŸ‡±', 'ğŸ‡®ğŸ‡²', 'ğŸ‡®ğŸ‡³', 'ğŸ‡®ğŸ‡´', 'ğŸ‡®ğŸ‡¶', 'ğŸ‡®ğŸ‡·', 'ğŸ‡®ğŸ‡¸', 'ğŸ‡®ğŸ‡¹', 'ğŸ‡¯ğŸ‡ª', 'ğŸ‡¯ğŸ‡²', 'ğŸ‡¯ğŸ‡´', 'ğŸ‡¯ğŸ‡µ', 'ğŸ‡°ğŸ‡ª', 'ğŸ‡°ğŸ‡¬', 'ğŸ‡°ğŸ‡­', 'ğŸ‡°ğŸ‡®', 'ğŸ‡°ğŸ‡²', 'ğŸ‡°ğŸ‡³', 'ğŸ‡°ğŸ‡µ', 'ğŸ‡°ğŸ‡·', 'ğŸ‡°ğŸ‡¼', 'ğŸ‡°ğŸ‡¾', 'ğŸ‡°ğŸ‡¿', 'ğŸ‡±ğŸ‡¦', 'ğŸ‡±ğŸ‡§', 'ğŸ‡±ğŸ‡¨', 'ğŸ‡±ğŸ‡®', 'ğŸ‡±ğŸ‡°', 'ğŸ‡±ğŸ‡·', 'ğŸ‡±ğŸ‡¸', 'ğŸ‡±ğŸ‡¹', 'ğŸ‡±ğŸ‡º', 'ğŸ‡±ğŸ‡»', 'ğŸ‡±ğŸ‡¾', 'ğŸ‡²ğŸ‡¦', 'ğŸ‡²ğŸ‡¨', 'ğŸ‡²ğŸ‡©', 'ğŸ‡²ğŸ‡ª', 'ğŸ‡²ğŸ‡«', 'ğŸ‡²ğŸ‡¬', 'ğŸ‡²ğŸ‡­', 'ğŸ‡²ğŸ‡°'
      ] ,// 150
      emo = {
        0: peopleemo,
        1: animals,
        2: food,
        3: activity,
        4: places,
        5: objects,
        6: symbols,
        7: flags
      };
      r.emo = emo;
  return r;
})(window, (function () {

  function init() {
    try {
      document.execCommand("AutoUrlDetect", false, false);
    } catch (e) {}
    oServer.agentId = getCookie('eccrmContext.username');
    Cookies.set('onlineSt', '1', { expires: 1 });
    oCustomer.isOn();
    setInterval(function (  ) {
      timeUp(oCustomer.currentls, 'msgTime');
    },10000);

    window.onload = load;
    window.top.onbeforeunload = onbeforeunload_handler;
    window.top.onunload = unloadform;
  }
  function load() {
    $(document).on("click", function () {
      $(".emtions").hide();
      $(".shotls").hide();
      $('.bank-info').hide();
    });
  }
  function onbeforeunload_handler() {
    var warning = "æ˜¯å¦ç¡®è®¤ç¦»çº¿?";
    return warning;
  }

  function unloadform() {
    Cookies.remove('onlineSt');
    $.ajax({
      type: 'post',
      url: '{{signinoroutApi}}',
      dataType: 'json',
      async: false,
      data: {
        agentId: oServer.agentId,
        status: 0,// 0ç¦»çº¿1åœ¨çº¿2å¿™ç¢Œ
        busyReson: 0//0=é»˜è®¤ 1=å¼€ä¼š 2=ä¼‘æ¯ 3=åŸ¹è®­ 4=å­¦ä¹ ï¼Œstatusä¸ºbusyæ—¶å¿…é€‰
      }
    });
  }

  function isType(obj, strType) {
    return Object.prototype.toString.call(obj) === '[object ' + strType + ']';
  }

  function isError(res) {
    if (res.error.returnCode != 0) {
      alert(res.error.returnMessage);
      return true;
    }
  }

  function objFindByKey(arrobj, key, value) {
    if (arrobj.length == 0) {
      return -1;
    }
    for (var i = 0; i < arrobj.length; i++) {
      if (arrobj[i][key] == value) {
        return i;
      }
    }
    return -1;
  }

  function emojiParse(dom) {
      twemoji.parse(dom, {
        callback: function (icon, options) {
          return '#resourcePrefix#/img/cschatroom/' + options.size + '/' + icon + '.png';
        },
        size: 72
      });
  }

  function refreshText(domTag, txt) {
      $(domTag+' .text').text(txt);
      var timer = setTimeout(function () {
        $(domTag+' .loading-warp').css('marginTop', '-5.8rem');
        $(domTag+' .text').text('ä¸‹æ‹‰å¼€å§‹åˆ·æ–°');
        clearTimeout(timer);
      }, 500)
  }

  function bubbleSort(elements) {
    for (var i = 0; i < elements.length - 1; i++) {
      for (var j = 0; j < elements.length - i - 1; j++) {
        if (elements[j] > elements[j + 1]) {
          var swap = elements[j];
          elements[j] = elements[j + 1];
          elements[j + 1] = swap
        }
      }
    }
  }

  function msgsort(array, k) {
    if (array == null || array.length == 0) return;
    var i = 0;
    var j = array.length - 1;
    var Sort = function (i, j) {
      // ç»“æŸæ¡ä»¶
      if (i == j) {
        return
      }
      var key = array[i];
      var stepi = i; // è®°å½•å¼€å§‹ä½ç½®
      var stepj = j; // è®°å½•ç»“æŸä½ç½®
      while (j > i) {
        // j <<-------------- å‘å‰æŸ¥æ‰¾
        if (array[j][k] >= key[k]) {
          j--;
        } else {
          array[i] = array[j];
          //i++ ------------>>å‘åæŸ¥æ‰¾
          while (j > ++i) {
            if (array[i][k] > key[k]) {
              array[j] = array[i];
              break;
            }
          }
        }
      }
      // å¦‚æœç¬¬ä¸€ä¸ªå–å‡ºçš„ key æ˜¯æœ€å°çš„æ•°
      if (stepi == i) {
        Sort(++i, stepj);
        return;
      }
      // æœ€åä¸€ä¸ªç©ºä½ç•™ç»™ key
      array[i] = key;
      // é€’å½’
      Sort(stepi, i);
      Sort(j, stepj);
    }
    Sort(i, j);
    return array;
  }

  function noEscapeHtml(html) {
    return html.replace(/(\&|\&)gt;/g, ">")
        .replace(/(\&|\&)lt;/g, "<")
        .replace(/(\&|\&)nbsp;/g, " ")
        .replace(/(\&|\&)amp;/g, "&")
        .replace(/(\&|\&)quot;/g, "\"")
        .replace(/<p>|<\/p>/g,'<br>')
        .replace(/<span>|<\/span>/g,'<br>')
        .replace(/<div>|<\/div>/g,'<br>')
        .replace(/(<br>|<br\/>)+/g,'<br>')
        .replace(/^(<br>|<br\/>)+/g,'')
        .replace(/(<br>|<br\/>)+$/g,'')
  }

  function getCookie(name) {
    var arr, reg = new RegExp('(^| )' + name + '=([^;]*)(;|$)');
    if (arr = document.cookie.match(reg)) {
      return unescape(arr[2]);
    } else {
      return null;
    }
  }

  function scrollTitle() {
    if(csPublic.titleStop) return;
    clearTimeout(csPublic.titleTimer);
    top.window.document.title=top.window.document.title.substring(1,top.window.document.title.length)+top.window.document.title.substring(0,1);
    top.window.document.title=top.window.document.title.substring(0,top.window.document.title.length);
    csPublic.titleTimer = setTimeout("csPublic.scrollTitle()", 500);
  }
  
  function arrUnique(arr,key) {
     var n = {},r=[]; //nä¸ºhashè¡¨ï¼Œrä¸ºä¸´æ—¶æ•°ç»„
     for(var i = 0; i < arr.length; i++) {
      if (!n[arr[i][key]]) {
        n[arr[i][key]] = true; //å­˜å…¥hashè¡¨
        r.push(arr[i]); //æŠŠå½“å‰æ•°ç»„çš„å½“å‰é¡¹pushåˆ°ä¸´æ—¶æ•°ç»„é‡Œé¢
      }
    }
    return r;
  }
  
  function GetDateStr(AddDayCount) {
    var dd = new Date();
    dd.setDate(dd.getDate()+AddDayCount);//è·å–AddDayCountå¤©åçš„æ—¥æœŸ
    var y = dd.getFullYear();
    var m = dd.getMonth()+1;//è·å–å½“å‰æœˆä»½çš„æ—¥æœŸ
    var d = dd.getDate();
    return y+"-"+m+"-"+d;
  }

  function timeUp(arr, k) {
    if (arr == null) {
      return;
    }

    if ((+new Date()) % 2 == 0) {
      for (var i = 0; i < arr.length; i++) {
        arr[i][k]++;
      }
    } else {
      for (var i = 0; i < arr.length; i++) {
        arr[i][k]--;
      }
    }
  }
  // å†å²æ¶ˆæ¯å·²é¡µç­¾æ‰“å¼€
  function openHisMsgTab(groupId,info){
    var exist = false;
    $(top.document).find('.nav-tabs li').each(function(){
      if($(this).data('groupid')==groupId){
        exist = true;
        $(this).trigger('click');
      }
    });
    !exist && oAddTab.addTab({
        title: info.name || 'å†å²æ¶ˆæ¯',
        url: 'app/imview/partials/cschatroom/historymsg.jsp',
        isRoot:false,
        data:info,
        groupId:groupId,
        onClose: function(){
          oAddTab.back();
        }
      });
  }
  return {
    init: init,
    isType: isType,
    isError: isError,
    objFindByKey: objFindByKey,
    emojiParse: emojiParse,
    refreshText: refreshText,
    bubbleSort: bubbleSort,
    msgsort: msgsort,
    noEscapeHtml: noEscapeHtml,
    getCookie: getCookie,
    scrollTitle:scrollTitle,
    arrUnique:arrUnique,
    GetDateStr:GetDateStr,
    openHisMsgTab:openHisMsgTab
  }

})());
